{% extends 'layouts/post_list.html' %}
{% block title %}{{ profile.username }}{% endblock %}

{% block mid_panel %}
	<div id="profile_head" style="background-image: url('/{{ profile.cover }}');background-repeat: no-repeat;background-size: auto 100%;">
		<div id="follow_action_container">
			{% if action == 'follow' %}
				<form id="profile_option" action="/user_follow/{{ profile.username }}/" method="post">
					{% csrf_token %}{{ form }}
					<input class="action_link" type="submit" value="follow" />
				</form>
			{% elif action == 'unfollow' %}
				<form id="profile_option" action="/user_unfollow/{{ profile.username }}/" method="post">
					{% csrf_token %}{{ form }}
					<input class="action_link" type="submit" value="unfollow" />
				</form>
			{% elif action == 'edit' %}
				<a id="profile_option" class="action_link" href="/{{ profile.username }}/edit">editar</a>
			{% endif %}

			<div id="follow_container">
				<a class="{% if profile_show == 'followers' %}normal_selected{% endif %}" href="/{{ profile.username }}/followers">{{ profile.follower_number }}<span> follower{{ profile.follower_number|pluralize }}</span></a>
				<a class="{% if profile_show == 'following' %}normal_selected{% endif %}" href="/{{ profile.username }}/following">{{ profile.following_number }}<span> following</span></a>
				<a class="{% if profile_show == 'sub_following' %}normal_selected{% endif %}" href="/{{ profile.username }}/sub_following">{{ profile.sub_following_number }}<span> sub{{ profile.sub_following_number|pluralize }}</span></a>
			</div>
		</div>

		<div id="profile_container">
			<a id="profile_image_view" href="/{{ profile.username }}"><img src="/{{ profile.avatar }}" alt="{{ profile.username }}"></a>
		</div>
	</div>
	<span id="username_rss_container">
		<a id="profile_username" href="/{{ profile.username }}">{{ profile.username }}</a>
		<!--
		<a id="feed" href="#" target="_blank"><img src="/s/img/feed.png"></a>
		-->
	</span>
	{% ifequal user.username  profile.username|slugify %}<a id="logout" href="/logout">logout</a>{% endifequal %}

	{% if profile_show == 'post' %}
		<div id="tab_selector">
			<a class="tab_selected" href="/{{ profile.username }}">post</a>
			<a href="/{{ profile.username }}/commit">commit</a>
		</div>
		{% block list_content %}{{ block.super }}{% endblock %}
	{% elif profile_show == 'commit' %}
		<div id="tab_selector">
			<a href="/{{ profile.username }}">post</a>
			<a class="tab_selected" href="/{{ profile.username }}/commit">commit</a>
		</div>
		{% for commit in commits %}
			<div class="post">
				<a class="post_title" href="{{ commit.post.get_absolute_url }}">{{ commit.post.slug }}</a>
				<a class="commit_id_title" href="{{ commit.post.get_absolute_url }}#{{ commit.commitid }}">#{{ commit.commitid }}</a>
				<div class="post_content">{{ commit.body_html|safe }}</div>
				<div class="post_info anon_post_info">
					<span class="date anon_date">{{ commit.created |date:"d/m/Y H:i" }}</span>
					<a class="commits_link" href="{{ commit.post.get_view_commits_url }}"><img src="/s/img/dfiid_logo_small.png">{{ commit.post.commit_number }}</a>
				</div>
			</div>
		{% endfor %}
	{% elif profile_show == 'followers' %}
		<div id="user_list_container">
			<ul>
				{% for follow in profile.followed.all %}
					<li>
						<a class="sub_container" href="/{{ follow.follower_id }}">
							<img src="/s/media/user/avatar/{{ follow.follower_id }}.png">
							<span>{{ follow.follower_id }}</span>
						</a>
					</li>
				{% endfor %}
			</ul>
		</div>
	{% elif profile_show == 'following' %}
		<div id="user_list_container">
			<ul>
				{% for follow in profile.follower.all %}
					<li>
						<a class="sub_container" href="/{{ follow.followed_id }}">
							<img src="/s/media/user/avatar/{{ follow.followed_id }}.png">
							<span>{{ follow.followed_id }}</span>
						</a>
					</li>
				{% endfor %}
			</ul>
		</div>
	{% elif profile_show == 'sub_following' %}
		<div id="user_list_container">
			<ul>
				{% for follow in profile.sub_follower.all %}
					<li>
						<a class="sub_container" href="/sub/{{ follow.sub_id }}">
							<img src="/s/media/sub/image/{{ follow.sub_id }}.png">
							<span>{{ follow.sub_id }}</span>
						</a>
					</li>
				{% endfor %}
			</ul>
		</div>
	{% endif %}
{% endblock %}