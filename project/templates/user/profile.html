{% extends 'layouts/post_list.html' %}
{% block title %}{{ profile.username }}{% endblock %}

{% block mid_panel %}
	<div id="follow_action_container">
		{% if action == 'follow' %}
			<form id="profile_option" action="/user_follow/{{ profile.username }}/" method="post">
				{% csrf_token %}{{ form }}
				<input class="action_link" type="submit" value="follow" />
			</form>
		{% elif action == 'unfollow' %}
			<form id="profile_option" action="/user_unfollow/{{ profile.username }}/" method="post">
				{% csrf_token %}{{ form }}
				<input class="action_link" type="submit" value="unfollow" />
			</form>
		{% elif action == 'edit' %}
			<a id="profile_option" class="action_link" href="/user/{{ profile.username }}/edit">editar</a>
		{% endif %}

		<div id="follow_container">
			<a class="{% if profile_show == 'followers' %}normal_selected{% endif %}" href="/{{ profile.username }}/followers">{{ profile.follower_number }}<span> follower{{ profile.follower_number|pluralize }}</span></a>
			<a class="{% if profile_show == 'following' %}normal_selected{% endif %}" href="/{{ profile.username }}/following">{{ profile.following_number }}<span> following</span></a>
			<a class="{% if profile_show == 'sub_following' %}normal_selected{% endif %}" href="/{{ profile.username }}/sub_following">{{ profile.sub_following_number }}<span> sub{{ profile.sub_following_number|pluralize }}</span></a>
		</div>
	</div>

	<div id="profile_container">
		<a id="profile_username" href="/{{ profile.username }}"><img id="profile_image_view" src="/{{ profile.avatar }}" alt="{{ profile.username }}"></a>
		<a id="profile_username" href="/{{ profile.username }}">{{ profile.username }}</a>
		<a id="feed" href="#" target="_blank"><img src="/s/img/feed.png"></a>
	</div>
	{% ifequal user.username  profile.username|slugify %}<a href="/logout">logout</a>{% endifequal %}

	<div id="profile_selector">
		<a class="{% if profile_show == 'post' %}profile_selected{% endif %}" href="/{{ profile.username }}">post</a>
		<a class="{% if profile_show == 'commit' %}profile_selected{% endif %}" href="/{{ profile.username }}/commit">commit</a>
	</div>

	{% if profile_show == 'post' %}
		{{ block.super }}
	{% elif profile_show == 'commit' %}
		{% for commit in profile.commits.all %}
			{% if commit.body_html %}
				<div id="{{ commit.commitid}}" class="post">
					<div class="post_content">{{ commit.body_html|safe }}</div>
				
					<div class="post_info">
						<a href="{{ commit.get_absolute_url }}#{{ commit.commitid}}">
							{{ commit.post.title }}
						</a>
						<a class="commits_link" href="{{ commit.post.get_view_commits_url }}"><img src="/s/img/dfiid_logo_small.png">{{ commit.post.commit_number }}</a>
					</div>
				</div>
			{% endif %}
		{% endfor %}
	{% elif profile_show == 'followers' %}
		{% for follow in profile.followed.all %}
			<a class="sub_container" href="/{{ follow.follower_id }}">
				<img src="/s/media/user/avatar/{{ follow.follower_id }}.png">
				<span>{{ follow.follower_id }}</span>
			</a>
		{% endfor %}
	{% elif profile_show == 'following' %}
		{% for follow in profile.follower.all %}
			<a class="sub_container" href="/{{ follow.followed_id }}">
				<img src="/s/media/user/avatar/{{ follow.followed_id }}.png">
				<span>{{ follow.followed_id }}</span>
			</a>
		{% endfor %}
	{% elif profile_show == 'sub_following' %}
		{% for follow in profile.sub_follower.all %}
			<a class="sub_container" href="/sub/{{ follow.sub_id }}">
				<img src="/s/media/sub/image/{{ follow.sub_id }}.png">
				<span>{{ follow.sub_id }}</span>
			</a>
		{% endfor %}
	{% endif %}

{% endblock %}